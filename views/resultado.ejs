<!DOCTYPE html>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <title>Resultado de Verificaci√≥n</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div class="container">

    <% if (certificado) { %>
      <h1>hola</h1>

      <h2>‚úÖ Certificado verificado correctamente</h2>
      <p><b>Alumno:</b> <%= certificado.nombre_alumno %></p>
      <p><b>Curso:</b> <%= certificado.curso %></p>
      <p><b>C√≥digo:</b> <%= certificado.codigo %></p>
      <p><b>Fecha de emisi√≥n:</b> 
        <%= certificado.fecha_emision ? new Date(certificado.fecha_emision).toLocaleString() : "No registrada" %>
      </p>

      <!-- Mostrar PDF o Imagen -->
      <% if (certificado.url_certificado) { %>

        <% 
          // Detectar si la URL es PDF o imagen
          const esPDF = certificado.url_certificado.toLowerCase().includes(".pdf");
        %>

        <% if (esPDF) { %>
            <!-- Mostrar PDF -->
            <iframe 
              src="<%= certificado.url_certificado %>" 
              width="80%" 
              height="600"
              style="border: 1px solid #ccc; border-radius: 10px;">
            </iframe>

        <% } else { %>
            <!-- Mostrar IMAGEN (JPG/PNG) -->
            <img 
              src="<%= certificado.url_certificado %>" 
              alt="Certificado"
              style="max-width: 80%; border: 1px solid #ccc; border-radius: 10px;">
        <% } %>

      <% } else { %>
        <p style="color:red;">‚ö†Ô∏è No hay archivo asociado al certificado.</p>
      <% } %>

      <br>

      <!-- QR -->
      <img src="/qrs/<%= certificado.codigo %>.png" alt="QR" width="200">

      <br><br>
      <a href="/">üîô Volver al inicio</a>

    <% } else { %>

      <h2 style="color:red;">‚ùå Certificado no encontrado</h2>
      <p>El c√≥digo ingresado no coincide con ning√∫n certificado en la base de datos.</p>
      <a href="/">üîô Intentar de nuevo</a>

    <% } %>

  </div>
</body>
</html>
